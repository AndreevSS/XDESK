<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="56">
  <HTTPTask id="2533" hostname="learning2.pflb.ru:56902" path="/engineer/task/task.js" url="http://learning2.pflb.ru:56902/engineer/task/task.js" ip="94.159.69.182" port="56902" client_ip="192.168.14.227" client_port="18209" connectionId="2992" origin="Primary" encodingType="ANSI" startDateTime="2019-12-04T15:03:27.184+03:00" startTime="841019" endTime="841078" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="1" waitTime="4" receiveTime="53" sslNegotiateTime="-1" responseBodySize="19435">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjE7IFRyaWRlbnQvNi4wKQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U0VTU0lPTj00M2JiNmRjYy1kMjM4LTQ5ZDMtOTA0Ny0xZGI4YmE3NDgwYjI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9lbmdpbmVlci90YXNrL3Rhc2suanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9sZWFybmluZzIucGZsYi5ydTo1NjkwMi8NClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4xOyBUcmlkZW50LzYuMCkNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IGxlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyDQpDb29raWU6IFNFU1NJT049NDNiYjZkY2MtZDIzOC00OWQzLTkwNDctMWRiOGJhNzQ4MGIyDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="SESSION" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDNiYjZkY2MtZDIzOC00OWQzLTkwNDctMWRiOGJhNzQ4MGIy</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>19050</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="X-Content-Type-Options" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9zbmlmZg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-XSS-Protection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTsgbW9kZT1ibG9jaw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Pragma" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Frame-Options" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U0FNRU9SSUdJTg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkwNTA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAwNCBEZWMgMjAxOSAxMjowMzoyNyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KWC1Db250ZW50LVR5cGUtT3B0aW9uczogbm9zbmlmZg0KWC1YU1MtUHJvdGVjdGlvbjogMTsgbW9kZT1ibG9jaw0KQ2FjaGUtQ29udHJvbDogbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZQ0KUHJhZ21hOiBuby1jYWNoZQ0KRXhwaXJlczogMA0KWC1GcmFtZS1PcHRpb25zOiBTQU1FT1JJR0lODQpMYXN0LU1vZGlmaWVkOiBUdWUsIDI3IE5vdiAyMDE4IDE0OjAzOjQzIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04DQpDb250ZW50LUxlbmd0aDogMTkwNTANCkRhdGU6IFdlZCwgMDQgRGVjIDIwMTkgMTI6MDM6MjcgR01UDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>ZnVuY3Rpb24gdGFzayh0ZW1wbGF0ZSkgewogICAgLy/Qn9GA0Y/Rh9C10Lwgc2lkZW5hdgogICAgaGlkZVNpZGVOYXYoKTsKCiAgICB2YXIgcm91dGVyID0gJC5Sb3V0ZXIoKTsKICAgIHZhciAkYnJlYWRXcmFwcGVyID0gJCgnI2JyZWFkX3dyYXBwZXInKTsKICAgICRicmVhZFdyYXBwZXIuZW1wdHkoKTsKICAgICRicmVhZFdyYXBwZXIuYXBwZW5kKCI8YSBocmVmPScvIycgY2xhc3M9J2hlYWRlci1sb2dvJz48aW1nIHNyYz0nLi4vLi4vaW1hZ2VzL2xvZ28tNWthLnBuZyc+PC9hPjxzcGFuPtCX0LDQtNCw0YfQsCDihJYiICsgcm91dGVyLnBhdGhbMV0gKyAiPC9zcGFuPiIpOwogICAgaWYoJC5Sb3V0ZXIoKS5wYXRoWzFdICYmICQuUm91dGVyKCkucGF0aFsyXSA9PT0gdW5kZWZpbmVkKXsKICAgICAgICAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiAiR0VUIiwKICAgICAgICAgICAgdXJsOiAiYXBpL3Rhc2svIiArICQuUm91dGVyKCkucGF0aFsxXQogICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHRhc2tEYXRhKSB7CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiR0VUIiwKICAgICAgICAgICAgICAgIHVybDogImFwaS9jaGVja0xvZ2luIgogICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uICh1c2VyUmlnaHRzKSB7CiAgICAgICAgICAgICAgICB0YXNrRGF0YS5ncm91cHMgPSB1c2VyUmlnaHRzLmdyb3VwczsKCiAgICAgICAgICAgICAgICB2YXIgJHN1cHBvcnRDb25zb2xlV3JhcHBlciA9ICQoJyNtYWluX3dyYXBwZXInKTsKCiAgICAgICAgICAgICAgICB0YXNrRGF0YS5yb2xlID0gcm9sZVRvTmFtZShyb2xlKTsKCiAgICAgICAgICAgICAgICB2YXIgc2xhTWlsbGlzZWM7CiAgICAgICAgICAgICAgICBpZiAodGFza0RhdGEuc2xhRGF0ZSkgewogICAgICAgICAgICAgICAgICAgIHNsYU1pbGxpc2VjID0gdGFza0RhdGEuc2xhRGF0ZTsKICAgICAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgICAgICBzbGFNaWxsaXNlYyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g0JXRgdC70Lgg0LzRiyDRg9C2INGD0YHRgtCw0L3QsNCy0LvQuNCy0LDQu9C4INC00LDRgtGDINC40LvQuCBzbGFEYXRlINC/0YDQvtGB0YDQvtGH0LXQvdCwCiAgICAgICAgICAgICAgICB0YXNrRGF0YS5pc1NwZWNpYWxpc3REYXRlID0gdGFza0RhdGEuaXNTcGVjaWFsaXN0RGF0ZSB8fCBzbGFNaWxsaXNlYyA8IERhdGUubm93KCk7CgogICAgICAgICAgICAgICAgLy/QntCx0YDQtdC30LDQtdC8INGB0LXQutGD0L3QtNGLINGDINC00LDRggogICAgICAgICAgICAgICAgcmVtb3ZlU2Vjb25kcy5jYWxsKHRhc2tEYXRhKTsKICAgICAgICAgICAgICAgIHRhc2tEYXRhLnRleHQgPSB0YXNrRGF0YS50ZXh0ID8gdGFza0RhdGEudGV4dC50cmltKCkgOiBudWxsOwogICAgICAgICAgICAgICAgZHVzdC5yZW5kZXJTb3VyY2UodGVtcGxhdGUsIHRhc2tEYXRhLCBmdW5jdGlvbiAoZXJyLCBvdXQpIHsKICAgICAgICAgICAgICAgICAgICAkc3VwcG9ydENvbnNvbGVXcmFwcGVyLmVtcHR5KCkuYXBwZW5kKG91dCk7CgogICAgICAgICAgICAgICAgICAgIHZhciAkbWVzc2FnZU1vZGFsID0gJCgnI21lc3NhZ2VNb2RhbCcpOwogICAgICAgICAgICAgICAgICAgIC8vc3BlY2lhbGlzdCBEYXRlCiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uIHNwZWNpYWxpc3REYXRlKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRpbWVCdG4gPSAkKCcjdGltZUJ0bicpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGRhdGVwaWNrZXIgPSAkKCcjdGlja2V0QWNjb3JkaW9uIC5kYXRlcGlja2VyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkdGltZXBpY2tlciA9ICQoJyN0aWNrZXRBY2NvcmRpb24gLnRpbWVwaWNrZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwaW5uZXIgPSAkKCcjc3BlY2lhbGlzdF9kYXRlX3NwaW5uZXInKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICRkYXRlcGlja2VyLnBpY2thZGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RNb250aHM6IHRydWUsIC8vIENyZWF0ZXMgYSBkcm9wZG93biB0byBjb250cm9sIG1vbnRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RZZWFyczogMTUsIC8vIENyZWF0ZXMgYSBkcm9wZG93biBvZiAxNSB5ZWFycyB0byBjb250cm9sIHllYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU9uU2VsZWN0OiB0cnVlIC8vIENsb3NlIHVwb24gc2VsZWN0aW5nIGEgZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lcGlja2VyLnBpY2thdGltZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAnbm93JywgLy8gU2V0IGRlZmF1bHQgdGltZTogJ25vdycsICcxOjMwQU0nLCAnMTY6MzAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tbm93OiAwLCAgICAgICAvLyBzZXQgZGVmYXVsdCB0aW1lIHRvICogbWlsbGlzZWNvbmRzIGZyb20gbm93ICh1c2luZyB3aXRoIGRlZmF1bHQgPSAnbm93JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWx2ZWhvdXI6IGZhbHNlLCAvLyBVc2UgQU0vUE0gb3IgMjQtaG91ciBmb3JtYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmV0ZXh0OiAn0J7QuicsIC8vIHRleHQgZm9yIGRvbmUtYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcnRleHQ6ICfQntGH0LjRgdGC0LjRgtGMJywgLy8gdGV4dCBmb3IgY2xlYXItYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWx0ZXh0OiAn0J7RgtC80LXQvdC40YLRjCcsIC8vIFRleHQgZm9yIGNhbmNlbC1idXR0b24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9jbG9zZTogZmFsc2UsIC8vIGF1dG9tYXRpYyBjbG9zZSB0aW1lcGlja2VyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbXBtY2xpY2thYmxlOiB0cnVlLCAvLyBtYWtlIEFNIFBNIGNsaWNrYWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJzaG93OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IC8vRnVuY3Rpb24gZm9yIGFmdGVyIG9wZW5pbmcgdGltZXBpY2tlcgogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2tEYXRhLnNwZWNpYWxpc3REYXRlICYmIHRhc2tEYXRhLnNwZWNpYWxpc3REYXRlICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZGF0ZXBpY2tlci52YWwodGFza0RhdGEuc3BlY2lhbGlzdERhdGUuc3BsaXQoJyAnKVswXS5zcGxpdCgnLScpLmpvaW4oJy4nKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZXBpY2tlci52YWwodGFza0RhdGEuc3BlY2lhbGlzdERhdGUuc3BsaXQoJyAnKVsxXS5zbGljZSgwLCA1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlSW52YWxpZCgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRhdGVwaWNrZXIudG9nZ2xlQ2xhc3MoJ3dyb25nJywgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVwaWNrZXIudG9nZ2xlQ2xhc3MoJ3dyb25nJywgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkZGF0ZXBpY2tlci5vbignY2hhbmdlJywgcmVtb3ZlSW52YWxpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lcGlja2VyLm9uKCdjaGFuZ2UnLCByZW1vdmVJbnZhbGlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICRkYXRlcGlja2VyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lcGlja2VyLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3BlY2lhbGlzdERhdGVWYWxpZGF0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWUgPSAkdGltZXBpY2tlci52YWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gJGRhdGVwaWNrZXIudmFsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZGF0ZXBpY2tlci50b2dnbGVDbGFzcygnd3JvbmcnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZXBpY2tlci50b2dnbGVDbGFzcygnd3JvbmcnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZSAmJiB0aW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZSA9IHRpbWUuc3BsaXQoJzonKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lID0gdGltZVswXSAqIDM2MDAgKiAxMDAwICsgdGltZVsxXSAqIDYwICogMTAwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF5cyA9IG5ldyBEYXRlKERhdGUucGFyc2UoZGF0ZS5zcGxpdCgnLicpLnJldmVyc2UoKS5qb2luKCctJykpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlzLnNldEhvdXJzKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dE1pbENvdW50ID0gbmV3IERhdGUoZGF5cy5nZXRUaW1lKCkgKyB0aW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRNaWxDb3VudCA8PSBuZXcgRGF0ZSgpIHx8IGlucHV0TWlsQ291bnQgPj0gbmV3IERhdGUoc2xhTWlsbGlzZWMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkYXRlcGlja2VyLnRvZ2dsZUNsYXNzKCd3cm9uZycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZXBpY2tlci50b2dnbGVDbGFzcygnd3JvbmcnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdwJykuaHRtbCgn0JTQsNGC0LAg0LTQvtC70LbQvdCwINCx0YvRgtGMINCx0L7Qu9GM0YjQtSDRgtC10LrRg9GJ0LXQuSDQuCDQvNC10L3RjNGI0LUg0LfQsNC/0LvQsNC90LjRgNC+0LLQsNC90L3QvtC5INC00LDRgtGLINC+0LrQvtC90YfQsNC90LjRjyDRgNCw0LHQvtGCLiA8YnI+JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAn0JfQsNC/0LvQsNC90LjRgNC+0LLQsNC90L3QsNGPINC00LDRgtCwINC+0LrQvtC90YfQsNC90LjRjyDRgNCw0LHQvtGCIOKAlCAnICsgdGFza0RhdGEuc2xhRGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwuZmluZCgnYScpLnJlbW92ZUF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5tb2RhbCgnb3BlbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dE1pbENvdW50LmdldFRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGUgJiYgIXRpbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ3AnKS50ZXh0KCfQktCy0LXQtNC40YLQtSDQtNCw0YLRgyDQuCDQstGA0LXQvNGPINC90LDRh9Cw0LvQsCDRgNCw0LHQvtGCJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwuZmluZCgnYScpLnJlbW92ZUF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5tb2RhbCgnb3BlbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZGF0ZXBpY2tlci50b2dnbGVDbGFzcygnd3JvbmcnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVwaWNrZXIudG9nZ2xlQ2xhc3MoJ3dyb25nJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCFkYXRlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdwJykudGV4dCgn0JLQstC10LTQuNGC0LUg0LTQsNGC0YMg0L3QsNGH0LDQu9CwINGA0LDQsdC+0YInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdhJykucmVtb3ZlQXR0cignaHJlZicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLm1vZGFsKCdvcGVuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkYXRlcGlja2VyLnRvZ2dsZUNsYXNzKCd3cm9uZycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZighdGltZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwuZmluZCgncCcpLnRleHQoJ9CS0LLQtdC00LjRgtC1INCy0YDQtdC80Y8g0L3QsNGH0LDQu9CwINGA0LDQsdC+0YInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdhJykucmVtb3ZlQXR0cignaHJlZicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLm1vZGFsKCdvcGVuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lcGlja2VyLnRvZ2dsZUNsYXNzKCd3cm9uZycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVCdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBzcGVjaWFsaXN0RGF0ZVZhbGlkYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5zbGlkZURvd24oMzAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3RpY2tldC8nICsgdGFza0RhdGEucGFyZW50SWQgKyAnL3Rhc2svJyArIHRhc2tEYXRhLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeydzcGVjaWFsaXN0RGF0ZSc6IHRpbWV9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuc2xpZGVVcCgzMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ3AnKS50ZXh0KCfQlNCw0YLQsCDQv9GA0LjQtdC30LTQsCDRgdC/0LXRhtC40LDQu9C40YHRgtCwINGD0YHQv9C10YjQvdC+INGD0YHRgtCw0L3QvtCy0LvQtdC90L3QsCDQtNC70Y8g0LfQsNC00LDRh9C4IFRTS18nICsgdGFza0RhdGEuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ2EnKS5yZW1vdmVBdHRyKCdocmVmJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwubW9kYWwoJ29wZW4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmlzU3BlY2lhbGlzdERhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hY3Rpb25zJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5zbGlkZVVwKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ3AnKS50ZXh0KGVycm9yLnJlc3BvbnNlSlNPTi5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdhLm1vZGFsLWFjdGlvbicpLnJlbW92ZUF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5tb2RhbCgnb3BlbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KSgpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgc3Bpbm5lciA9ICQoJyNzcGlubmVyJykuaGlkZSgwKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gQ29tbWl0IHRhc2sKICAgICAgICAgICAgICAgICAgICAkKCcjY29tbWl0LXRhc2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuc2xpZGVEb3duKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2FwaS90aWNrZXQvJyArIHRhc2tEYXRhLnBhcmVudElkICsgJy9jbG9zZScKICAgICAgICAgICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5zbGlkZVVwKDMwMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdwJykuaHRtbCgn0JjQvdGG0LjQtNC10L3RgiA8YSBjbGFzcz0ibW9kYWwtYWN0aW9uIG1vZGFsLWNsb3NlIiBocmVmPSIvI3RpY2tldC8nICsgZGF0YS5pZCArICciPklOQ18nICsgZGF0YS5pZCArICc8L2E+INC30LDQutGA0YvRgicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdhLm1vZGFsLWFjdGlvbicpLmF0dHIoJ2hyZWYnLCAnLycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5tb2RhbCgnb3BlbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1vZGFsLW92ZXJsYXknKS51bmJpbmQoJ2NsaWNrJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oZXJyb3IpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5zbGlkZVVwKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ3AnKS50ZXh0KGVycm9yLnJlc3BvbnNlSlNPTi5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwuZmluZCgnYS5tb2RhbC1hY3Rpb24nKS5hdHRyKCdocmVmJywgJy8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwubW9kYWwoJ29wZW4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIC8vIEJhY2sgaW4gd29yawogICAgICAgICAgICAgICAgICAgICQoJyNiYWNrLWluLXdvcmstdGFzaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuc2xpZGVEb3duKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2FwaS90YXNrLycgKyB0YXNrRGF0YS5pZCArICcvZGVjbGluZScKICAgICAgICAgICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoYW5zdykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5zbGlkZVVwKDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ3AnKS50ZXh0KCfQl9Cw0LTQsNGH0LAg0LLQvtC30LLRgNCw0YnQtdC90LAg0LIg0YDQsNCx0L7RgtGDJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ2EubW9kYWwtYWN0aW9uJykuYXR0cignaHJlZicsICcvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLm1vZGFsKCdvcGVuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubW9kYWwtb3ZlcmxheScpLnVuYmluZCgnY2xpY2snKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihlcnJvcil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGlubmVyLnNsaWRlVXAoMzAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwuZmluZCgncCcpLnRleHQoJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/QvtC/0YvRgtC60LUg0L7RgtC/0YDQsNCy0LjRgtGMINC30LDQtNCw0YfRgyDQvdCwINC00L7RgNCw0LHQvtGC0LrRgycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdhLm1vZGFsLWFjdGlvbicpLnJlbW92ZUF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwubW9kYWwoJ29wZW4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIC8v0KDQsNCx0L7RgtCwINGBINC/0LvQsNCz0LjQvdC+0LwgRmlsZXVwbG9hZCDQuCDQvtGC0L/RgNCw0LLQutCwINC60L7QvNC80LXQvdGC0LDRgNC40LXQsgogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlSWRBcnJheSA9IFtdOwogICAgICAgICAgICAgICAgICAgIHZhciBtYXhGaWxlU2l6ZSA9IHttYXg6MTA0ODU3NjAsIGN1cnJlbnQ6MH07CiAgICAgICAgICAgICAgICAgICAgdmFyICR1cGxvYWRPYmogPSAkKCIjY29tbWVudHVwbG9hZGVyIikudXBsb2FkRmlsZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1heEZpbGVDb3VudDogNiwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4RmlsZVNpemU6IDEwNDg1NzYwLAogICAgICAgICAgICAgICAgICAgICAgICBkcmFnRHJvcFN0cjogIjxzcGFuPjxzcGFuIHN0eWxlPSdtYXJnaW4tbGVmdDogMTVweDsnPtCf0YDQuNC70L7QttC40YLQtSDRhNCw0LnQu9GLINC00LvRjyDRgdC60L7RgNC10LnRiNC10LPQviDRgNC10YjQtdC90LjRjyDQstCw0YjQtdC5INC/0YDQvtCx0LvQtdC80Ys8L3NwYW4+PC9zcGFuPiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEZWxldGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogImFwaS90aWNrZXQvZmlsZS8iLAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogImZpbGVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVudGlhbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVudGlhbENvdW50OiA2LAogICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogInRydWUiLAogICAgICAgICAgICAgICAgICAgICAgICBlbmN0eXBlOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUNhbGxiYWNrOiBmdW5jdGlvbiAob2JqKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gdG9UcmFuc2xpdChvYmpbMF0ubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhGaWxlU2l6ZS5jdXJyZW50IC09IG1heEZpbGVTaXplW2ZpbGVOYW1lXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtYXhGaWxlU2l6ZVtmaWxlTmFtZV07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdhcGkvdGlja2V0L2ZpbGUvJyArIG9ialswXS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnREVMRVRFJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVJZEFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmpbMF0uaWQgPT09IGZpbGVJZEFycmF5W2ldKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlSWRBcnJheS5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdDpmdW5jdGlvbiAoZmlsZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZGVidWdnZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWxTaXplID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChmaWxlcywgZnVuY3Rpb24gKGksIGZpbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFNpemUgKz0gZmlsZS5zaXplOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXhGaWxlU2l6ZS5jdXJyZW50ICsgdG90YWxTaXplID4gbWF4RmlsZVNpemUubWF4KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ3AnKS50ZXh0KCfQntCx0YnQuNC5INGA0LDQt9C80LXRgCDRhNCw0LnQu9C+0LIg0L3QtSDQtNC+0LvQttC10L0g0L/RgNC10LLRi9GI0LDRgtGMIDEwINCc0LXQs9Cw0LHQsNC50YInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ2EubW9kYWwtYWN0aW9uJykucmVtb3ZlQXR0cignaHJlZicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwubW9kYWwoJ29wZW4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG1heEZpbGVTaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChmaWxlcywgZnVuY3Rpb24gKGksIGZpbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4RmlsZVNpemVbdG9UcmFuc2xpdChmaWxlLm5hbWUpXSA9IGZpbGUuc2l6ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhGaWxlU2l6ZS5jdXJyZW50ICs9IHRvdGFsU2l6ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG1heEZpbGVTaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbiAoZmlsZXMsIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCfQpNCw0LnQuyDRg9GB0L/QtdGI0L3QviDQtNC+0LHQsNCy0LvQtdC9JywgMzAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlSWRBcnJheS5wdXNoKGRhdGFbMF0uaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAkKCcjc2VuZENvbW1lbnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY29tbWVudFRleHQgPSAkKCcjY29tbWVudFRleHQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRjb21tZW50VGV4dC52YWwoKSAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRDb21tZW50KCRjb21tZW50VGV4dC52YWwoKSwgdGFza0RhdGEucGFyZW50SWQsIGZpbGVJZEFycmF5LCAkdXBsb2FkT2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJZEFycmF5ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ3AnKS50ZXh0KCfQktCy0LXQtNC40YLQtSDRgtC10LrRgdGCINC60L7QvNC80LXQvdGC0LDRgNC40Y8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlTW9kYWwuZmluZCgnYS5tb2RhbC1hY3Rpb24nKS5yZW1vdmVBdHRyKCdocmVmJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZU1vZGFsLm1vZGFsKCdvcGVuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgLy/QnNCw0YHQutCwCiAgICAgICAgICAgICAgICAgICAgJCgnI2FwcGxpY2FudFBob25lJykubWFzaygiOCg5OTkpIDk5OS05OTk5Iik7CgogICAgICAgICAgICAgICAgICAgIC8v0JjQvdC40YbQuNCw0LvQuNC30LjRgNGD0LXQvCDQsNC60LrQvtGA0LTQtdC+0L0KICAgICAgICAgICAgICAgICAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSgpOwoKICAgICAgICAgICAgICAgICAgICBsb2FkQ29tbWVudHModGFza0RhdGEucGFyZW50SWQsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoWEhSKSB7CiAgICAgICAgICAgIHZhciAkbWFpbldyYXBwZXIgPSAkKCcjbWFpbl93cmFwcGVyJyk7CiAgICAgICAgICAgICRtYWluV3JhcHBlci5lbXB0eSgpOwogICAgICAgICAgICAkbWFpbldyYXBwZXIuYXBwZW5kKCI8ZGl2IGNsYXNzPSdjb250YWluZXInIHN0eWxlPSd3aWR0aDogOTAlJz48ZGl2IGNsYXNzPSdyb3cnPjxkaXYgY2xhc3M9J2NvbCBsMTIgbTEyIHMxMic+PGgxIGNsYXNzPSd0aWNrZXQtZXJyb3ItbWVzc2FnZSc+IiArIFhIUi5yZXNwb25zZUpTT04ubWVzc2FnZSArICI8L2gxPjxwIGNsYXNzPSdjZW50ZXItYWxpZ24nPjxhIGhyZWY9Jy8nIGNsYXNzPVwid2F2ZXMtZWZmZWN0IHdhdmVzLWxpZ2h0IGJ0biBjYXJkLWJ0biBibGFuay1idXR0b25cIj7QlNC+0LzQvtC5PC9hPjwvcD48L2Rpdj48L2Rpdj48L2Rpdj4iKTsKICAgICAgICB9KTsKICAgIH0KfQoKLy/Qk9GA0YPQt9C40Lwg0LrQvtC80LzQtdC90YLQsNGA0LjQuApmdW5jdGlvbiBsb2FkQ29tbWVudHModGlja2V0SUQsIHlvdXJDb21tZW50RmxhZykgewogICAgdmFyIGNvbW1lbnRzTGlzdCA9ICIiOwogICAgJC5hamF4KHsKICAgICAgICB1cmw6ICd0cGwvc3VwcG9ydC90aWNrZXRDb21tZW50LmR1c3QnLAogICAgICAgIGNvbnRlbnRUeXBlOiAiY2hhcnNldD11dGYtOCIKICAgIH0pLmRvbmUoZnVuY3Rpb24gKHRwbCkgewogICAgICAgICQuYWpheCh7CiAgICAgICAgICAgIHR5cGU6ICJHRVQiLAogICAgICAgICAgICB1cmw6ICdhcGkvdGlja2V0LycgKyB0aWNrZXRJRCArICcvY29tbWVudC8nCiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICBmb3IodmFyIGk9MDsgaTxkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoaT09PTAgJiYgeW91ckNvbW1lbnRGbGFnKXsKICAgICAgICAgICAgICAgICAgICBkYXRhW2ldWyJ2aWV3ZWQiXSA9ICJ0cnVlIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGR1c3QucmVuZGVyU291cmNlKHRwbCwgZGF0YVtpXSwgZnVuY3Rpb24oZXJyLCBvdXQpIHsKICAgICAgICAgICAgICAgICAgICBjb21tZW50c0xpc3QgKz0gb3V0OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyICRjb21tZW50V3JhcHBlciA9ICQoIiNjb21tZW50X3dyYXBwZXIiKTsKICAgICAgICAgICAgJGNvbW1lbnRXcmFwcGVyLmVtcHR5KCk7CiAgICAgICAgICAgICRjb21tZW50V3JhcHBlci5hcHBlbmQoY29tbWVudHNMaXN0KTsKCiAgICAgICAgICAgIGluaXRVc2VySW5mbygpOwogICAgICAgIH0pOwogICAgfSk7Cn0KCi8v0JfQsNCz0YDRg9C20LDQtdC8INC40L3RhNC+0YDQvNCw0YbQuNGOINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtQpmdW5jdGlvbiBpbml0VXNlckluZm8oKSB7CiAgICB2YXIgJGNvbW1lbnRhdG9ySW5mbyA9ICQoJy5jb21tZW50YXRvci1pbmZvJyk7CiAgICAkY29tbWVudGF0b3JJbmZvLnVuYmluZCgnY2xpY2snKTsKICAgICRjb21tZW50YXRvckluZm8ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICQuYWpheCh7CiAgICAgICAgICAgIHR5cGU6ICJHRVQiLAogICAgICAgICAgICB1cmw6ICJhcGkvdXNlci8iICsgJCh0aGlzKS5kYXRhKCdpZCcpICsgIi9pbmZvIgogICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHVzZXJEYXRhKSB7CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB1cmw6ICJ0cGwvc3VwcG9ydC91c2VyQ2FyZC5kdXN0IgogICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uICh1c2VyQ2FyZCkgewogICAgICAgICAgICAgICAgZHVzdC5yZW5kZXJTb3VyY2UodXNlckNhcmQsIHVzZXJEYXRhLCBmdW5jdGlvbiAoZXJyLCBvdXQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgJG1vZGFsQ2FyZFdyYXBwZXIgPSAkKCcjY2FyZFdyYXBwZXInKTsKICAgICAgICAgICAgICAgICAgICAkbW9kYWxDYXJkV3JhcHBlci5lbXB0eSgpOwogICAgICAgICAgICAgICAgICAgICRtb2RhbENhcmRXcmFwcGVyLmFwcGVuZChvdXQpOwogICAgICAgICAgICAgICAgICAgICQoJyN1c2VySW5mb01vZGFsJykubW9kYWwoJ29wZW4nKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9KQp9CgovL9Ce0YLQv9GA0LDQstC70Y/QtdC8INC60L7QvNC80LXQvdGC0LDRgNC40LkKZnVuY3Rpb24gc2VuZENvbW1lbnQoY29tbWVudCwgdGlja2V0SUQsIGZpbGVJZEFycmF5LCAkdXBsb2FkT2JqKSB7CiAgICB2YXIgY29tbWVudERhdGEgPSB7CiAgICAgICAgdGV4dDogY29tbWVudCwKICAgICAgICBmaWxlczogZmlsZUlkQXJyYXkKICAgIH07CiAgICB2YXIgJG1lc3NhZ2VNb2RhbCA9ICQoJyNtZXNzYWdlTW9kYWwnKTsKICAgIHZhciAkcHZ0U3dpdGNoID0gJCgnI3B2dFN3aXRjaCcpOwogICAgaWYgKCRwdnRTd2l0Y2gucHJvcCgnY2hlY2tlZCcpKXsKICAgICAgICBjb21tZW50RGF0YS5wdnQgPSBmYWxzZTsKICAgIH0KICAgIHZhciAkY29tbWVudFR5cGVTZWxlY3QgPSAkKCcjY29tbWVudFR5cGUnKTsKICAgIGlmKCRjb21tZW50VHlwZVNlbGVjdCAhPT0gbnVsbCl7CiAgICAgICAgY29tbWVudERhdGEudHlwZSA9ICRjb21tZW50VHlwZVNlbGVjdC52YWwoKTsKICAgIH0KICAgICQuYWpheCh7CiAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgIHVybDogJ2FwaS90aWNrZXQvJyArIHRpY2tldElEICsgJy9jb21tZW50LycsCiAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShjb21tZW50RGF0YSkKICAgIH0pLmRvbmUoZnVuY3Rpb24gKCkgewogICAgICAgICQoJyNjb21tZW50VGV4dCcpLnZhbCgnJyk7CiAgICAgICAgJHVwbG9hZE9iai5yZXNldCgpOwogICAgICAgICRtZXNzYWdlTW9kYWwuZmluZCgncCcpLnRleHQoJ9Ca0L7QvNC80LXQvdGC0LDRgNC40Lkg0YPRgdC/0LXRiNC90L4g0LTQvtCx0LDQstC70LXQvScpOwogICAgICAgICRtZXNzYWdlTW9kYWwuZmluZCgnYS5tb2RhbC1hY3Rpb24nKS5yZW1vdmVBdHRyKCdocmVmJyk7CiAgICAgICAgJG1lc3NhZ2VNb2RhbC5tb2RhbCgnb3BlbicpOwogICAgICAgIGxvYWRDb21tZW50cyh0aWNrZXRJRCwgdHJ1ZSk7CiAgICB9KS5mYWlsKGZ1bmN0aW9uIChjb2RlKSB7CiAgICAgICAgJG1lc3NhZ2VNb2RhbC5maW5kKCdwJykudGV4dChjb2RlLnJlc3BvbnNlSlNPTi5tZXNzYWdlKTsKICAgICAgICAkbWVzc2FnZU1vZGFsLmZpbmQoJ2EubW9kYWwtYWN0aW9uJykucmVtb3ZlQXR0cignaHJlZicpOwogICAgICAgICRtZXNzYWdlTW9kYWwubW9kYWwoJ29wZW4nKTsKICAgIH0pOwp9</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>