<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="113">
  <HTTPTask id="1987" hostname="learning2.pflb.ru:56902" path="/engineer/wrapper/wrapper.js" url="http://learning2.pflb.ru:56902/engineer/wrapper/wrapper.js" ip="94.159.69.182" port="56902" connectionId="12" origin="Primary" frame="1" startDateTime="2019-11-25T18:00:09.537+03:00" startTime="596708718" endTime="596708718">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bGVhcm5pbmcyLnBmbGIucnU6NTY5MDI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Requested-With" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>WE1MSHR0cFJlcXVlc3Q=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc4LjAuMzkwNC4xMDggU2FmYXJpLzUzNy4zNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL2xlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cnUtUlUscnU7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjc=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2Vzc2lvbkV4cGlyZWQ9ZmFsc2U7IFNFU1NJT049OTNlZmE2MWUtZWQ5MC00ODE1LTg1MjctN2FhMzAyMWZmYTgzOyBjdXJyZW50Q29tcGFueT0wOyBjdXJyZW50VXNlcj1tYXN0ZXI7IFBGTEIucHJlLmxvZ2luLmxpbms9bnVsbA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9lbmdpbmVlci93cmFwcGVyL3dyYXBwZXIuanMgSFRUUC8xLjENCkhvc3Q6IGxlYXJuaW5nMi5wZmxiLnJ1OjU2OTAyDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpBY2NlcHQ6ICovKg0KWC1SZXF1ZXN0ZWQtV2l0aDogWE1MSHR0cFJlcXVlc3QNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83OC4wLjM5MDQuMTA4IFNhZmFyaS81MzcuMzYNClJlZmVyZXI6IGh0dHA6Ly9sZWFybmluZzIucGZsYi5ydTo1NjkwMi8NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBydS1SVSxydTtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNw0KQ29va2llOiBzZXNzaW9uRXhwaXJlZD1mYWxzZTsgU0VTU0lPTj05M2VmYTYxZS1lZDkwLTQ4MTUtODUyNy03YWEzMDIxZmZhODM7IGN1cnJlbnRDb21wYW55PTA7IGN1cnJlbnRVc2VyPW1hc3RlcjsgUEZMQi5wcmUubG9naW4ubGluaz1udWxsDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="sessionExpired" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZmFsc2U=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="SESSION" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>OTNlZmE2MWUtZWQ5MC00ODE1LTg1MjctN2FhMzAyMWZmYTgz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="currentCompany" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="currentUser" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWFzdGVy</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="PFLB.pre.login.link" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bnVsbA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>34579</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="X-Content-Type-Options" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9zbmlmZg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-XSS-Protection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTsgbW9kZT1ibG9jaw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Pragma" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Frame-Options" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U0FNRU9SSUdJTg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNyBOb3YgMjAxOCAxNDowMzo0MyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MzQ1Nzk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAyNSBOb3YgMjAxOSAxNDo1OTozOSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KWC1Db250ZW50LVR5cGUtT3B0aW9uczogbm9zbmlmZg0KWC1YU1MtUHJvdGVjdGlvbjogMTsgbW9kZT1ibG9jaw0KQ2FjaGUtQ29udHJvbDogbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZQ0KUHJhZ21hOiBuby1jYWNoZQ0KRXhwaXJlczogMA0KWC1GcmFtZS1PcHRpb25zOiBTQU1FT1JJR0lODQpMYXN0LU1vZGlmaWVkOiBUdWUsIDI3IE5vdiAyMDE4IDE0OjAzOjQzIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PVVURi04DQpDb250ZW50LUxlbmd0aDogMzQ1NzkNCkRhdGU6IE1vbiwgMjUgTm92IDIwMTkgMTQ6NTk6MzkgR01UDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>dmFyIG1lbnVTdGF0ZUNvb2tpZXNOYW1lID0gIm1lbnVTdGF0ZSI7CnZhciAkc2lkZW5hdjsKdmFyICRoaWRlTmF2QmFyOwp2YXIgJHNob3dOYXZCYXI7CnZhciAkaGVhZGVyRm9vdGVyTWFpbjsKdmFyIGlzSGlkZGVuTmF2OwovLyDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNC1INGE0LjQu9GM0YLRgNC+0LIKZnVuY3Rpb24gcmVzdG9yZUZpbHRlcnMoKSB7CiAgICBpZiAoIX5wcmV2aXVvc1VybC5pbmRleE9mKCd0YXNrcycpICYmICF+cHJldml1b3NVcmwuaW5kZXhPZigndGlja2V0cycpKXsKICAgICAgICB2YXIgZmlsdGVyU2V0dGluZyA9ICQuY29va2llKCdmaWx0ZXJTZXR0aW5nJykgPyBKU09OLnBhcnNlKCQuY29va2llKCdmaWx0ZXJTZXR0aW5nJykpIDogbnVsbDsKICAgICAgICBpZiAoZmlsdGVyU2V0dGluZykgewogICAgICAgICAgICBpZiAobG9jYXRpb24uaHJlZiAhPT0gZmlsdGVyU2V0dGluZy5wYWdlKSB7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gZmlsdGVyU2V0dGluZy5wYWdlOwogICAgICAgICAgICAgICAgY3VycmVudFVybCA9ICcnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgnI2RhdGVTdGFydCcpLnZhbChmaWx0ZXJTZXR0aW5nLmRhdGVTdGFydCkudHJpZ2dlcignY2hhbmdlJyk7CiAgICAgICAgICAgICAgICAkKCcjZGF0ZUVuZCcpLnZhbChmaWx0ZXJTZXR0aW5nLmRhdGVFbmQpLnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICAgICAgICAgICAgJCgnI292ZXJkdWUnKS5wcm9wKCdjaGVja2VkJywgZmlsdGVyU2V0dGluZy5vdmVyZHVlKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGZpbHRlck5hbWUgaW4gZmlsdGVyU2V0dGluZy5maWx0ZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlclNldHRpbmcuZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShmaWx0ZXJOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlclNldHRpbmcuZmlsdGVyc1tmaWx0ZXJOYW1lXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnbGFiZWxbZm9yPSInICsgZmlsdGVyTmFtZSArICciXScpLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkKCcjc21ob1NlbGVjdCcpLnZhbChmaWx0ZXJTZXR0aW5nLnNtaG8pLnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICAgICAgICAgICAgLy8g0JLQvtGB0YLQsNC90L7QstC70LXQvdC40LUg0YLQtdC80Ysg0L7QsdGA0LDRidC10L3QuNGPCiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyU2V0dGluZy5jYXQxKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyICRjYXQxID0gJCgnI2NhdGx2bDEnKTsKICAgICAgICAgICAgICAgICAgICAkY2F0MS5lbXB0eSgpLmFwcGVuZCgnPG9wdGlvbiB2YWx1ZT0iJyArIGZpbHRlclNldHRpbmcuY2F0MS52YWx1ZSArICciPicKICAgICAgICAgICAgICAgICAgICAgICAgKyBmaWx0ZXJTZXR0aW5nLmNhdDEudGV4dCAgKyAnPC9vcHRpb24+JykudmFsKGZpbHRlclNldHRpbmcuY2F0MS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyU2V0dGluZy5jYXQxLnNlcnZpY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRjYXQxLnRyaWdnZXIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdDI6c2VsZWN0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZpbHRlclNldHRpbmcuY2F0MQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFRoZW1lKGZpbHRlclNldHRpbmcuY2F0MS5zZXJ2aWNlcyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGNhdDEudHJpZ2dlcignY2hhbmdlJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJTZXR0aW5nLmNhdDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjYXQyID0gJCgnI2NhdGx2bDInKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGNhdDIuZW1wdHkoKS5hcHBlbmQoJzxvcHRpb24gdmFsdWU9IicgKyBmaWx0ZXJTZXR0aW5nLmNhdDIudmFsdWUgKyAnIj4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGZpbHRlclNldHRpbmcuY2F0Mi50ZXh0ICArICc8L29wdGlvbj4nKS52YWwoZmlsdGVyU2V0dGluZy5jYXQyLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlclNldHRpbmcuY2F0Mi5zZXJ2aWNlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNhdDIudHJpZ2dlcih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdDI6c2VsZWN0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZmlsdGVyU2V0dGluZy5jYXQyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0VGhlbWUoZmlsdGVyU2V0dGluZy5jYXQyLnNlcnZpY2VzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjYXQyLnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJTZXR0aW5nLmNhdDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY2F0MyA9ICQoJyNjYXRsdmwzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2F0My5lbXB0eSgpLmFwcGVuZCgnPG9wdGlvbiB2YWx1ZT0iJyArIGZpbHRlclNldHRpbmcuY2F0My52YWx1ZSArICciPicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGZpbHRlclNldHRpbmcuY2F0My50ZXh0ICArICc8L29wdGlvbj4nKS52YWwoZmlsdGVyU2V0dGluZy5jYXQzLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJTZXR0aW5nLmNhdDMuc2VydmljZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2F0My50cmlnZ2VyKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdDI6c2VsZWN0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBmaWx0ZXJTZXR0aW5nLmNhdDMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRUaGVtZShmaWx0ZXJTZXR0aW5nLmNhdDMuc2VydmljZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2F0My50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJTZXR0aW5nLmNhdDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGNhdDQgPSAkKCcjY2F0bHZsNCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjYXQ0LmVtcHR5KCkuYXBwZW5kKCc8b3B0aW9uIHZhbHVlPSInICsgZmlsdGVyU2V0dGluZy5jYXQ0LnZhbHVlICsgJyI+JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGZpbHRlclNldHRpbmcuY2F0NC50ZXh0ICArICc8L29wdGlvbj4nKS52YWwoZmlsdGVyU2V0dGluZy5jYXQ0LnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyU2V0dGluZy5jYXQ0LnNlcnZpY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjYXQ0LnRyaWdnZXIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdDI6c2VsZWN0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZpbHRlclNldHRpbmcuY2F0NAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFRoZW1lKGZpbHRlclNldHRpbmcuY2F0NC5zZXJ2aWNlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNhdDQudHJpZ2dlcignY2hhbmdlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRUaGVtZSAoc2VydmljZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoZW1lID0gJCgnI3RoZW1lJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lLnBhcmVudCgpLnNob3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoZW1lLmhhc0NsYXNzKCJzZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lLnNlbGVjdDIoJ2Rlc3Ryb3knKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZS5zZWxlY3QyKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckNzc0NsYXNzOiAnc2VsZWN0LXdyYXBwZXIgbWFyZ2lucycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogItCS0YvQsdC10YDQuNGC0LUg0YLQtdC80YMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VydmljZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6ICdpbmZpbml0eScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc2NhcGVNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya3VwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgLy8gbGV0IG91ciBjdXN0b20gZm9ybWF0dGVyIHdvcmsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVzdWx0OiBmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVNlbGVjdGlvbjogZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLm5hbWUgPyBncm91cC5uYW1lIDogZ3JvdXAudGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZS52YWwoZmlsdGVyU2V0dGluZy50aGVtZSA/IGZpbHRlclNldHRpbmcudGhlbWUudmFsdWUgOiBudWxsKS50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGZpbHRlclNldHRpbmcuZW5naW5lZXIpIHsKICAgICAgICAgICAgICAgICAgICAkKCcjZW5naW5lZXJTZWxlY3QnKS5lbXB0eSgpLmFwcGVuZCgnPG9wdGlvbiB2YWx1ZT0iJyArIGZpbHRlclNldHRpbmcuZW5naW5lZXIudmFsdWUgKyAnIj4nCiAgICAgICAgICAgICAgICAgICAgICAgICsgZmlsdGVyU2V0dGluZy5lbmdpbmVlci50ZXh0ICArICc8L29wdGlvbj4nKS52YWwoZmlsdGVyU2V0dGluZy5lbmdpbmVlci52YWx1ZSkudHJpZ2dlcignY2hhbmdlJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyU2V0dGluZy5sb2NhdGlvbikgewogICAgICAgICAgICAgICAgICAgICQoJyNsb2NhdGlvblNlbGVjdCcpLmVtcHR5KCkuYXBwZW5kKCc8b3B0aW9uIHZhbHVlPSInICsgZmlsdGVyU2V0dGluZy5sb2NhdGlvbi52YWx1ZSArICciPicKICAgICAgICAgICAgICAgICAgICAgICAgKyBmaWx0ZXJTZXR0aW5nLmxvY2F0aW9uLnRleHQgICsgJzwvb3B0aW9uPicpLnZhbChmaWx0ZXJTZXR0aW5nLmxvY2F0aW9uLnZhbHVlKS50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJTZXR0aW5nLmRpdmlzaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI2RpdmlzaW9uU2VsZWN0JykuZW1wdHkoKS5hcHBlbmQoJzxvcHRpb24gdmFsdWU9IicgKyBmaWx0ZXJTZXR0aW5nLmRpdmlzaW9uLnZhbHVlICsgJyI+JwogICAgICAgICAgICAgICAgICAgICAgICArIGZpbHRlclNldHRpbmcuZGl2aXNpb24udGV4dCAgKyAnPC9vcHRpb24+JykudmFsKGZpbHRlclNldHRpbmcuZGl2aXNpb24udmFsdWUpLnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGggfHwgMCkgPiA5OTIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyU2V0dGluZy5oaWRlU2lkZU5hdikgewogICAgICAgICAgICAgICAgICAgICAgICAkaGlkZU5hdkJhci50cmlnZ2VyKCdjbGljaycpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRzaG93TmF2QmFyLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCi8vINGB0L7RhdGA0LDQvdC10L3QuNC1INGE0LjQu9GM0YLRgNC+0LIKZnVuY3Rpb24gc2F2ZUZpbHRlcnMoIHVybCApewogICAgaWYgKCQoJ3VsLnBhZ2luYXRpb24gbGkuYWN0aXZlJykubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBmaWx0ZXJzID0gJCgnI25hdi1tb2JpbGUnKS5maW5kKCcuY2FyZC1wYW5lbC5zd2l0Y2g6bm90KC5oaWRlKScpOwogICAgICAgIHZhciAkY2F0MSA9ICQoJyNjYXRsdmwxJyksICRjYXQyID0gJCgnI2NhdGx2bDInKSwgJGNhdDMgPSAkKCcjY2F0bHZsMycpLCAkY2F0NCA9ICQoJyNjYXRsdmw0JyksICR0aGVtZSA9ICQoJyN0aGVtZScpLAogICAgICAgICAgICAkZW5naW5lZXIgPSAkKCcjZW5naW5lZXJTZWxlY3QnKSwgJGxvY2F0aW9uID0gJCgnI2xvY2F0aW9uU2VsZWN0JyksICRkaXZpc2lvbiA9ICQoJyNkaXZpc2lvblNlbGVjdCcpOwogICAgICAgICRjYXQxID0gJGNhdDEuaGFzQ2xhc3MoInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUiKSA/ICRjYXQxLnNlbGVjdDIoJ2RhdGEnKVswXSA6IG51bGw7CiAgICAgICAgJGNhdDIgPSAkY2F0Mi5oYXNDbGFzcygic2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZSIpID8gJGNhdDIuc2VsZWN0MignZGF0YScpWzBdIDogbnVsbDsKICAgICAgICAkY2F0MyA9ICRjYXQzLmhhc0NsYXNzKCJzZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlIikgPyAkY2F0My5zZWxlY3QyKCdkYXRhJylbMF0gOiBudWxsOwogICAgICAgICRjYXQ0ID0gJGNhdDQuaGFzQ2xhc3MoInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUiKSA/ICRjYXQ0LnNlbGVjdDIoJ2RhdGEnKVswXSA6IG51bGw7CiAgICAgICAgJHRoZW1lID0gJHRoZW1lLmhhc0NsYXNzKCJzZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlIikgPyAkdGhlbWUuc2VsZWN0MignZGF0YScpWzBdIDogbnVsbDsKCiAgICAgICAgJGVuZ2luZWVyID0gJGVuZ2luZWVyLmhhc0NsYXNzKCJzZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlIikgPyAkZW5naW5lZXIuc2VsZWN0MignZGF0YScpWzBdIDogbnVsbDsKICAgICAgICAkbG9jYXRpb24gPSAkbG9jYXRpb24uaGFzQ2xhc3MoInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUiKSA/ICRsb2NhdGlvbi5zZWxlY3QyKCdkYXRhJylbMF0gOiBudWxsOwogICAgICAgICRkaXZpc2lvbiA9ICRkaXZpc2lvbi5oYXNDbGFzcygic2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZSIpID8gJGRpdmlzaW9uLnNlbGVjdDIoJ2RhdGEnKVswXSA6IG51bGw7CiAgICAgICAgdmFyIGZpbHRlclNldHRpbmcgPSB7CiAgICAgICAgICAgIHBhZ2U6IHVybCA/IHVybCA6IGxvY2F0aW9uLmhyZWYsCiAgICAgICAgICAgIHNtaG86ICQoJyNzbWhvU2VsZWN0JykudmFsKCksCiAgICAgICAgICAgIGRhdGVTdGFydDogJCgnI2RhdGVTdGFydCcpLnZhbCgpLAogICAgICAgICAgICBkYXRlRW5kOiAkKCcjZGF0ZUVuZCcpLnZhbCgpLAogICAgICAgICAgICBjYXQxOiAkY2F0MSA/IHsKICAgICAgICAgICAgICAgIHZhbHVlOiAkY2F0MS5pZCwKICAgICAgICAgICAgICAgIHRleHQ6ICRjYXQxLm5hbWUgPyAkY2F0MS5uYW1lIDogJGNhdDEudGV4dCwKICAgICAgICAgICAgICAgIHNlcnZpY2VzOiAkY2F0MS5zZXJ2aWNlcwogICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgY2F0MjogJGNhdDIgPyB7CiAgICAgICAgICAgICAgICB2YWx1ZTogJGNhdDIuaWQsCiAgICAgICAgICAgICAgICB0ZXh0OiAkY2F0Mi5uYW1lLAogICAgICAgICAgICAgICAgc2VydmljZXM6ICRjYXQyLnNlcnZpY2VzCiAgICAgICAgICAgIH0gOiBudWxsLAogICAgICAgICAgICBjYXQzOiAkY2F0MyA/IHsKICAgICAgICAgICAgICAgIHZhbHVlOiAkY2F0My5pZCwKICAgICAgICAgICAgICAgIHRleHQ6ICRjYXQzLm5hbWUsCiAgICAgICAgICAgICAgICBzZXJ2aWNlczogJGNhdDMuc2VydmljZXMKICAgICAgICAgICAgfSA6IG51bGwsCiAgICAgICAgICAgIGNhdDQ6ICRjYXQ0ID8gewogICAgICAgICAgICAgICAgdmFsdWU6ICRjYXQ0LmlkLAogICAgICAgICAgICAgICAgdGV4dDogJGNhdDQubmFtZSwKICAgICAgICAgICAgICAgIHNlcnZpY2VzOiAkY2F0NC5zZXJ2aWNlcwogICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgdGhlbWU6ICR0aGVtZSA/IHsKICAgICAgICAgICAgICAgIHZhbHVlOiAkdGhlbWUuaWQsCiAgICAgICAgICAgICAgICB0ZXh0OiAkdGhlbWUubmFtZQogICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgZW5naW5lZXI6ICRlbmdpbmVlciA/IHsKICAgICAgICAgICAgICAgIHZhbHVlOiAkZW5naW5lZXIuaWQsCiAgICAgICAgICAgICAgICBuYW1lOiAkZW5naW5lZXIudGV4dAogICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgbG9jYXRpb246ICRsb2NhdGlvbiA/IHsKICAgICAgICAgICAgICAgIHZhbHVlOiAkbG9jYXRpb24uaWQsCiAgICAgICAgICAgICAgICBuYW1lOiAkbG9jYXRpb24udGV4dAogICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgZGl2aXNpb246ICRkaXZpc2lvbiA/IHsKICAgICAgICAgICAgICAgIHZhbHVlOiAkZGl2aXNpb24uaWQsCiAgICAgICAgICAgICAgICBuYW1lOiAkZGl2aXNpb24udGV4dAogICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgb3ZlcmR1ZTogJCgnI292ZXJkdWUnKS5wcm9wKCdjaGVja2VkJyksCiAgICAgICAgICAgIGZpbHRlcnM6IHt9CiAgICAgICAgfTsKICAgICAgICBpZiAoIX5maWx0ZXJTZXR0aW5nLnBhZ2UuaW5kZXhPZigncGFnZScpKSB7CiAgICAgICAgICAgIGZpbHRlclNldHRpbmcucGFnZSArPSAiJnBhZ2U9IiArICQoJ3VsLnBhZ2luYXRpb24gbGkuYWN0aXZlJykuZGF0YSgncGFnZScpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZpbHRlclNldHRpbmcucGFnZSA9IGZpbHRlclNldHRpbmcucGFnZS5zbGljZSgwLCBmaWx0ZXJTZXR0aW5nLnBhZ2UuaW5kZXhPZigncGFnZScpIC0gMSkgKyAiJnBhZ2U9IiArICQoJ3VsLnBhZ2luYXRpb24gbGkuYWN0aXZlJykuZGF0YSgncGFnZScpOwogICAgICAgIH0KICAgICAgICBmaWx0ZXJzLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7CiAgICAgICAgICAgIGZpbHRlclNldHRpbmcuZmlsdGVyc1skKGVsZW1lbnQpLnBhcmVudCgpLmF0dHIoJ2ZvcicpXSA9ICQoZWxlbWVudCkuZmluZCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpLnByb3AoJ2NoZWNrZWQnKTsKICAgICAgICB9KTsKICAgICAgICBpZiAoTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKSA+IDk5MiAmJiAkc2lkZW5hdi5jc3MoJ2Rpc3BsYXknKSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgIGZpbHRlclNldHRpbmcuaGlkZVNpZGVOYXYgPSB0cnVlOwogICAgICAgIH0KICAgICAgICAkLmNvb2tpZSgnZmlsdGVyU2V0dGluZycsIEpTT04uc3RyaW5naWZ5KGZpbHRlclNldHRpbmcpKTsKICAgIH0KfQoKZnVuY3Rpb24gc2hvd1NpZGVOYXYoKSB7CiAgICBpZiAoTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKSA8PSA5OTIpIHsKICAgICAgICAkc2lkZW5hdi50b2dnbGVDbGFzcygnY3J1dGNoJywgZmFsc2UpOwogICAgICAgICRzaWRlbmF2LnNpZGVOYXYoJ2hpZGUnKTsKICAgICAgICAkc2lkZW5hdi5zaG93KCk7CiAgICB9IGVsc2UgewogICAgICAgIGlmICgkc2lkZW5hdi5jc3MoJ2Rpc3BsYXknKSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgICRzaG93TmF2QmFyLnNob3coKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkaGlkZU5hdkJhci5zaG93KCk7CiAgICAgICAgfQogICAgfQogICAgJCgnYS5idXR0b24tY29sbGFwc2UuaGFtYnVyZ2VyJykuc2hvdygwKTsKICAgIGlzSGlkZGVuTmF2ID0gZmFsc2U7Cn0KCmZ1bmN0aW9uIGhpZGVTaWRlTmF2KCkgewogICAgJCgnI25hdi1tb2JpbGUnKS5zaWRlTmF2KCdoaWRlJyk7CiAgICAkc2lkZW5hdi5oaWRlKCk7CiAgICAkc2hvd05hdkJhci5oaWRlKCk7CiAgICAkaGlkZU5hdkJhci5oaWRlKCk7CiAgICAkKCdhLmJ1dHRvbi1jb2xsYXBzZS5oYW1idXJnZXInKS5oaWRlKDApOwogICAgJGhlYWRlckZvb3Rlck1haW4uY3NzKCdwYWRkaW5nLWxlZnQnLCAnMCcpOwogICAgaXNIaWRkZW5OYXYgPSB0cnVlOwp9CgpmdW5jdGlvbiB3cmFwcGVyKHRlbXBsYXRlLCB1c2VyLCByaWdodHMpewogICAgdmFyIG1haW5Db250YWluZXJEYXRhID0ge307CiAgICBtYWluQ29udGFpbmVyRGF0YVsnZnVsbE5hbWUnXSA9IHVzZXIuZnVsbE5hbWU7CiAgICBtYWluQ29udGFpbmVyRGF0YVsncm9sZSddID0gcm9sZVRvTmFtZShyb2xlKTsKCiAgICAkLmFqYXgoewogICAgICAgIHR5cGU6ICdHRVQnLAogICAgICAgIHVybDogJ2FwaS90aWNrZXQvY291bnRCeVN0YXRlLzQnCiAgICB9KS5kb25lKGZ1bmN0aW9uICh1bnJlYWRUaWNrZXRzQ291bnQpIHsKICAgICAgICB2YXIgdW5yZWFkQ291bnQgPSB1bnJlYWRUaWNrZXRzQ291bnQgJiYgdW5yZWFkVGlja2V0c0NvdW50LmNvdW50ID8gdW5yZWFkVGlja2V0c0NvdW50LmNvdW50IDogMDsKICAgICAgICByZW5kZXJNYWluKHVucmVhZENvdW50KTsKICAgIH0pLmZhaWwoZnVuY3Rpb24gKCkgewogICAgICAgIHJlbmRlck1haW4oMCk7CiAgICB9KTsKCiAgICBmdW5jdGlvbiByZW5kZXJNYWluKHVucmVhZFRpY2tldHNDb3VudCkgewogICAgICAgIGlmICh1bnJlYWRUaWNrZXRzQ291bnQgPiAwKSB7CiAgICAgICAgICAgIG1haW5Db250YWluZXJEYXRhWyJ1bnJlYWRDb3VudCJdID0gdW5yZWFkVGlja2V0c0NvdW50OwogICAgICAgICAgICAvKmlmIChyb3V0ZXIucGF0aFswXSAhPSAibWFpbiIpIHsKICAgICAgICAgICAgICAgIG1haW5Db250YWluZXJEYXRhLnVucmVhZFN0YXRlID0gdHJ1ZTsKICAgICAgICAgICAgfSovCiAgICAgICAgfQogICAgICAgIC8v0JfQsNCz0YDRg9C20LDQtdC8INC40L3RhNC+0YDQvNCw0YbQuNGOINC+INGB0YLRgNCw0L3QuNGG0LUg0LjQtyBDb29raWUKICAgICAgICBtYWluQ29udGFpbmVyRGF0YS5hY3Rpb25zID0gcmlnaHRzLmFjdGlvbnM7CiAgICAgICAgbWFpbkNvbnRhaW5lckRhdGEucm9sZXMgPSByaWdodHMucm9sZXM7CiAgICAgICAgbWFpbkNvbnRhaW5lckRhdGEuY29tcGFueUlkID0gJC5jb29raWUoImN1cnJlbnRDb21wYW55Iik7CgogICAgICAgIHZhciBtZW51U3RhdGUgPSBnZXRNZW51U3RhdGVGcm9tSnNvbigpOwogICAgICAgIGZvcih2YXIgbWVudU5hbWUgaW4gbWVudVN0YXRlKSB7CiAgICAgICAgICAgIGlmIChtZW51U3RhdGVbbWVudU5hbWVdID09PSAnb3BlbmVkJykgewogICAgICAgICAgICAgICAgbWFpbkNvbnRhaW5lckRhdGFbbWVudU5hbWVdID0gImRpc3BsYXk6IGJsb2NrIjsKICAgICAgICAgICAgICAgIG1haW5Db250YWluZXJEYXRhW21lbnVOYW1lICsgInNpZ24iXSA9ICJyZW1vdmUiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWFpbkNvbnRhaW5lckRhdGFbbWVudU5hbWVdID0gIiI7CiAgICAgICAgICAgICAgICBtYWluQ29udGFpbmVyRGF0YVttZW51TmFtZSArICJzaWduIl0gPSAiYWRkIjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc3dpdGNoIChyb2xlKXsKICAgICAgICAgICAgY2FzZSAnbWFzdGVyJzogbWFpbkNvbnRhaW5lckRhdGEuaWNvbiA9ICdzdGFyJzsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2xlYWRlcic6IG1haW5Db250YWluZXJEYXRhLmljb24gPSAnc3VwZXJ2aXNvcl9hY2NvdW50JzsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3Nlbmlvcic6IG1haW5Db250YWluZXJEYXRhLmljb24gPSAncGVyc29uJzsgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGR1c3QucmVuZGVyU291cmNlKHRlbXBsYXRlLCBtYWluQ29udGFpbmVyRGF0YSwgZnVuY3Rpb24gKGVyciwgb3V0KSB7CiAgICAgICAgICAgIHZhciAkYm9keVdyYXBwZXIgPSAkKCcjYXBwJyk7CiAgICAgICAgICAgICRib2R5V3JhcHBlci5lbXB0eSgpOwogICAgICAgICAgICAkYm9keVdyYXBwZXIuYXBwZW5kKG91dCk7CgogICAgICAgICAgICAkc2lkZW5hdiA9ICQoJyNuYXYtbW9iaWxlJyk7CiAgICAgICAgICAgICRoaWRlTmF2QmFyID0gJCgnI2hpZGVOYXZCYXInKTsKICAgICAgICAgICAgJHNob3dOYXZCYXIgPSAkKCcjc2hvd05hdkJhcicpOwoKICAgICAgICAgICAgLy/QndCw0LLQtdGI0LjQstCw0LXQvCDRgdC+0LHRi9GC0LjRjyDQvdCwINGN0LvQtdC80LXQvdGC0Ysg0L7QsdC+0LvQvtGH0LrQuAoKICAgICAgICAgICAgLy/QodC+0LHRi9GC0LjQtSDQvdCw0LbQsNGC0LjRjyDQutC90L7Qv9C60Lgg0L7RgtC60YDRi9Cy0LDRjtGJ0LXQuSDQvNC+0LTQsNC7INGBINCy0LXRgNGB0LjQtdC5INGB0LHQvtGA0LrQuAogICAgICAgICAgICAkKCcjbV92ZXJzaW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmVyc2lvbkNvbnRyb2woKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkaGVhZGVyRm9vdGVyTWFpbiA9ICQoJ2hlYWRlciwgZm9vdGVyLCBtYWluJyk7CgogICAgICAgICAgICAvL9CY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0LvQsNCz0LjQvdCwIFNpZGVOYXYgKNCR0L7QutC+0LLQvtC1INC80LXQvdGOKQogICAgICAgICAgICB2YXIgcHJldldpZHRoID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKTsKICAgICAgICAgICAgaWYgKHByZXZXaWR0aCA+IDk5MikgewogICAgICAgICAgICAgICAgJHNpZGVuYXYudG9nZ2xlQ2xhc3MoJ2NydXRjaCcsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJGhpZGVOYXZCYXIuaGlkZSgpOwogICAgICAgICAgICAgICAgJHNob3dOYXZCYXIuaGlkZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRXaWR0aCA9IE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGggfHwgMCk7CiAgICAgICAgICAgICAgICBpZiAocHJldldpZHRoIDw9IDk5MiAmJiBjdXJyZW50V2lkdGggPiA5OTIgJiYgIWlzSGlkZGVuTmF2KXsKICAgICAgICAgICAgICAgICAgICAkc2lkZW5hdi50b2dnbGVDbGFzcygnY3J1dGNoJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgJHNob3dOYXZCYXIudHJpZ2dlcignY2xpY2snKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJldldpZHRoID4gOTkyICYmIGN1cnJlbnRXaWR0aCA8PSA5OTIgJiYgIWlzSGlkZGVuTmF2KSB7CiAgICAgICAgICAgICAgICAgICAgJHNpZGVuYXYudG9nZ2xlQ2xhc3MoJ2NydXRjaCcsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAkaGlkZU5hdkJhci5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgJHNob3dOYXZCYXIuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgICRzaWRlbmF2LnNob3coKTsKICAgICAgICAgICAgICAgICAgICAkc2lkZW5hdi5zaWRlTmF2KCdoaWRlJyk7CiAgICAgICAgICAgICAgICAgICAgJGhlYWRlckZvb3Rlck1haW4uY3NzKCdwYWRkaW5nLWxlZnQnLCAnJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwcmV2V2lkdGggPSBjdXJyZW50V2lkdGg7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCIuYnV0dG9uLWNvbGxhcHNlIikuc2lkZU5hdih7CiAgICAgICAgICAgICAgICBvbk9wZW46IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgJHNpZGVuYXYudG9nZ2xlQ2xhc3MoJ2NydXRjaCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApID49IDk5MikgewogICAgICAgICAgICAgICAgICAgICAgICAkaGlkZU5hdkJhci5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGggfHwgMCkgPCA5OTIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHNpZGVuYXYudG9nZ2xlQ2xhc3MoJ2NydXRjaCcsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICRoaWRlTmF2QmFyLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICRzaWRlbmF2LmhpZGUoKTsKICAgICAgICAgICAgICAgICQoJ21haW4sIGZvb3RlciwgaGVhZGVyJykuY3NzKCdwYWRkaW5nLWxlZnQnLCAnMCcpOwogICAgICAgICAgICAgICAgJGhpZGVOYXZCYXIuaGlkZSgpOwogICAgICAgICAgICAgICAgJHNob3dOYXZCYXIuc2hvdygpCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgJHNob3dOYXZCYXIub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJHNpZGVuYXYuc2hvdygpOwogICAgICAgICAgICAgICAgJCgnbWFpbiwgZm9vdGVyLCBoZWFkZXInKS5jc3MoJ3BhZGRpbmctbGVmdCcsICczMDBweCcpOwogICAgICAgICAgICAgICAgJGhpZGVOYXZCYXIuc2hvdygpOwogICAgICAgICAgICAgICAgJHNob3dOYXZCYXIuaGlkZSgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHZhciAkZWVNZW51ID0gJCgnLmVlLW1lbnUtY2FyZCcpOwoKICAgICAgICAgICAgLy/Qn9C+0LrQsNC30YvQstCw0LXQvCDQuNC70Lgg0L/RgNGP0YfQtdC8INC80LXQvdGOCiAgICAgICAgICAgICQoJyNlZS1tZW51LWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgJGVlTWVudS50b2dnbGVDbGFzcygnZWUtaGlkZGVuJyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICghJGVlTWVudS5oYXNDbGFzcygnZWUtaGlkZGVuJykpeyRlZU1lbnUuYWRkQ2xhc3MoJ2VlLWhpZGRlbicpfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8v0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LrQvdC+0L/QutC4INCy0YvRhdC+0LTQsAogICAgICAgICAgICAkKCcjbV9sb2dvdXQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgdXJsOiAnYXBpL2xvZ291dCcsCiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkLmNvb2tpZSgnc2Vzc2lvbkV4cGlyZWQnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvbG9naW4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8v0JrQvtC90YLRgNC+0LvQu9C10YAg0YDQsNGB0LrRgNGL0YLQuNGPINC80LXQvdGOCiAgICAgICAgICAgIHZhciBjb2xsYXBzaWJsZU1lbnUgPSAkKCcuY29sbGFwc2libGUtaGVhZGVyJyk7CiAgICAgICAgICAgIGNvbGxhcHNpYmxlTWVudS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5maW5kKCdpLmNvbGxhcGNlLWljb24nKS50ZXh0KCkpIHsKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2kuY29sbGFwY2UtaWNvbicpLnRleHQoJ2FkZCcpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29sbGFwc2libGVNZW51Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB2YXIgbWVudU9wdGlvbiA9ICQodGhpcyk7CiAgICAgICAgICAgICAgICB2YXIgbWVudVN0YXRlID0gZ2V0TWVudVN0YXRlRnJvbUpzb24oKTsKICAgICAgICAgICAgICAgIGlmIChtZW51T3B0aW9uLm5leHRBbGwoJ2RpdicpLmNzcygnZGlzcGxheScpID09ICdub25lJykgewogICAgICAgICAgICAgICAgICAgIG1lbnVPcHRpb24uZmluZCgnaS5jb2xsYXBjZS1pY29uJykudGV4dCgncmVtb3ZlJyk7CiAgICAgICAgICAgICAgICAgICAgbWVudU9wdGlvbi5uZXh0QWxsKCdkaXYnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICAgICAgICAgICAgICBtZW51U3RhdGVbbWVudU9wdGlvbi5kYXRhKCdsaW5rbmFtZScpXSA9ICdvcGVuZWQnOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtZW51T3B0aW9uLmZpbmQoJ2kuY29sbGFwY2UtaWNvbicpLnRleHQoJ2FkZCcpOwogICAgICAgICAgICAgICAgICAgIG1lbnVPcHRpb24ubmV4dEFsbCgnZGl2JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgICAgICAgICAgICAgICBtZW51U3RhdGVbbWVudU9wdGlvbi5kYXRhKCdsaW5rbmFtZScpXSA9ICdjb2xsYXBzZWQnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJC5jb29raWUobWVudVN0YXRlQ29va2llc05hbWUsIEpTT04uc3RyaW5naWZ5KG1lbnVTdGF0ZSkpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHZhciAkYnJlYWRXcmFwcGVyID0gJCgnI2JyZWFkX3dyYXBwZXInKTsKICAgICAgICAgICAgJGJyZWFkV3JhcHBlci5lbXB0eSgpOwoKICAgICAgICAgICAgLy/QnNC10L3Rj9C10Lwg0L/QvtC70L7QttC10L3QuNC1INGB0YLRgNC10LvQutC4INC/0YDQuCDQutC+0LvQsNC/0YHQtSDRhNC40LvRjNGC0YDQvtCyCiAgICAgICAgICAgICRzaWRlbmF2LmZpbmQoJy5jb2xsYXBzaWJsZScpLmNvbGxhcHNpYmxlKHsKICAgICAgICAgICAgICAgIG9uT3BlbjogZnVuY3Rpb24oZWwpIHsgJHNpZGVuYXYuZmluZCgnLmNvbGxhcHNpYmxlLWhlYWRlciAuYmFkZ2UgaScpLnRvZ2dsZUNsYXNzKCdvcGVuJywgdHJ1ZSk7IH0sIC8vIENhbGxiYWNrIGZvciBDb2xsYXBzaWJsZSBvcGVuCiAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbihlbCkgeyAkc2lkZW5hdi5maW5kKCcuY29sbGFwc2libGUtaGVhZGVyIC5iYWRnZSBpJykudG9nZ2xlQ2xhc3MoJ29wZW4nLCBmYWxzZSk7IH0gLy8gQ2FsbGJhY2sgZm9yIENvbGxhcHNpYmxlIGNsb3NlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy/QnNC10L3Rj9C10Lwg0YbQstC10YIg0YbQuNGE0YAg0L/RgNC4INC/0LXRgNC10LrQu9GO0YfQtdC90LjQuCDRgdCy0LjRgtGH0LAKICAgICAgICAgICAgJHNpZGVuYXYuZmluZCgnLnN3aXRjaCBpbnB1dFt0eXBlPSJjaGVja2JveCJdJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykucHJvcCgnY2hlY2tlZCcpICYmICRzaWRlbmF2LmZpbmQoJy5jYXJkLXBhbmVsLnN3aXRjaDpub3QoLmluYWN0aXZlKTpub3QoLmhpZGUpJykubGVuZ3RoIDw9IDEpCiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIHRydWUpOwogICAgICAgICAgICAgICAgZWxzZSAkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkLXBhbmVsJykudG9nZ2xlQ2xhc3MoJ2luYWN0aXZlJyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy/QmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyBkYXRhcGlja2VyCiAgICAgICAgICAgICRzaWRlbmF2LmZpbmQoJy5kYXRlcGlja2VyJykucGlja2FkYXRlKHsKICAgICAgICAgICAgICAgIHNlbGVjdE1vbnRoczogdHJ1ZSwgLy8gQ3JlYXRlcyBhIGRyb3Bkb3duIHRvIGNvbnRyb2wgbW9udGgKICAgICAgICAgICAgICAgIHNlbGVjdFllYXJzOiAxNSwgLy8gQ3JlYXRlcyBhIGRyb3Bkb3duIG9mIDE1IHllYXJzIHRvIGNvbnRyb2wgeWVhciwKICAgICAgICAgICAgICAgIGNsb3NlT25TZWxlY3Q6IGZhbHNlLCAvLyBDbG9zZSB1cG9uIHNlbGVjdGluZyBhIGRhdGUsCiAgICAgICAgICAgICAgICAvLyDQn9GA0LDQstC60Lgg0LTQu9GPINC00L7RgdGC0LjQttC10L3QuNGPINC60YDQvtGB0YHQsdGA0LDRg9C30LXRgNC90L7RgdGC0LgKICAgICAgICAgICAgICAgIG9uT3BlbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICRzaWRlbmF2LmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJykuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpCiAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ3RvcCcsIHdpbmRvdy5zY3JvbGxZKS5jc3MoJ3otaW5kZXgnLCAnMCcpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkc2lkZW5hdi5jc3MoJ292ZXJmbG93JywgJ2F1dG8nKS5jc3MoJ3Bvc2l0aW9uJywgJ2ZpeGVkJykKICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygndG9wJywgJzAnKS5jc3MoJ3otaW5kZXgnLCAnOTk5Jyk7CiAgICAgICAgICAgICAgICAgICAgLy8g0KPQsdC40YDQsNC10Lwg0LDQutGC0LjQstC90YvQuSDRjdC70LXQvNC10L3Rgiwg0YfRgtC+0LHRiyDQv9GA0Lgg0YTQvtC60YPRgdC1INC90LUg0L7RgtC60YDRi9Cy0LDQu9GB0Y8g0LrQsNC70LXQvdC00LDRgNGMCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g0KHQtdC70LXQutGCIDIKICAgICAgICAgICAgJCgnI2VuZ2luZWVyU2VsZWN0Jykuc2VsZWN0Mih7CiAgICAgICAgICAgICAgICBjb250YWluZXJDc3NDbGFzczogJ3NlbGVjdC13cmFwcGVyJywKICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAi0JLRi9Cx0LXRgNC40YLQtSDQuNC90LbQtdC90LXRgNCwIiwKICAgICAgICAgICAgICAgIGFqYXg6IHsKICAgICAgICAgICAgICAgICAgICB1cmw6ICIvYXBpL2VuZ2luZWVycyIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiR0VUIiwKICAgICAgICAgICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxIDogcGFyYW1zLnRlcm0gPyBwYXJhbXMudGVybSA6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZSA6IChwYXJhbXMucGFnZSB8fCAxKSAtIDEKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHByb2Nlc3NSZXN1bHRzOiBmdW5jdGlvbiAoZGF0YSwgcGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzIDogZGF0YS5jb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbiA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3JlOiAhZGF0YS5sYXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6IHRydWUsCiAgICAgICAgICAgICAgICBlc2NhcGVNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXApIHsgcmV0dXJuIG1hcmt1cDsgfSwgLy8gbGV0IG91ciBjdXN0b20gZm9ybWF0dGVyIHdvcmsKICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVzdWx0OiBmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAuZnVsbE5hbWU7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdGVtcGxhdGVTZWxlY3Rpb246IGZ1bmN0aW9uIChncm91cCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5mdWxsTmFtZSA/IGdyb3VwLmZ1bGxOYW1lIDogZ3JvdXAudGV4dDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCcjbG9jYXRpb25TZWxlY3QnKS5zZWxlY3QyKHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lckNzc0NsYXNzOiAnc2VsZWN0LXdyYXBwZXInLAogICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICLQktGL0LHQtdGA0LjRgtC1INC80LXRgdGC0L7QvdCw0YXQvtC20LTQtdC90LjQtSIsCiAgICAgICAgICAgICAgICBhamF4OiB7CiAgICAgICAgICAgICAgICAgICAgdXJsOiAiL2FwaS9zaG9wcyIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiR0VUIiwKICAgICAgICAgICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxIDogcGFyYW1zLnRlcm0gPyBwYXJhbXMudGVybSA6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZSA6IChwYXJhbXMucGFnZSB8fCAxKSAtIDEKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHByb2Nlc3NSZXN1bHRzOiBmdW5jdGlvbiAoZGF0YSwgcGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzIDogZGF0YS5jb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbiA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3JlOiAhZGF0YS5sYXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6IHRydWUsCiAgICAgICAgICAgICAgICBlc2NhcGVNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXApIHsgcmV0dXJuIG1hcmt1cDsgfSwgLy8gbGV0IG91ciBjdXN0b20gZm9ybWF0dGVyIHdvcmsKICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVzdWx0OiBmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAubG9jYXRpb247CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdGVtcGxhdGVTZWxlY3Rpb246IGZ1bmN0aW9uIChncm91cCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5sb2NhdGlvbiA/IGdyb3VwLmxvY2F0aW9uIDogZ3JvdXAudGV4dDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCcjZGl2aXNpb25TZWxlY3QnKS5zZWxlY3QyKHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lckNzc0NsYXNzOiAnc2VsZWN0LXdyYXBwZXInLAogICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICLQktGL0LHQtdGA0LjRgtC1INC00LjQstC40LfQuNC+0L0iLAogICAgICAgICAgICAgICAgYWpheDogewogICAgICAgICAgICAgICAgICAgIHVybDogIi9hcGkvb3JnU3RydWN0dXJlL2RpdmlzaW9uLyIsCiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiR0VUIiwKICAgICAgICAgICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxIDogcGFyYW1zLnRlcm0gPyBwYXJhbXMudGVybSA6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZSA6IChwYXJhbXMucGFnZSB8fCAxKSAtIDEKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHByb2Nlc3NSZXN1bHRzOiBmdW5jdGlvbiAoZGF0YSwgcGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzIDogZGF0YS5jb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbiA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3JlOiAhZGF0YS5sYXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6IHRydWUsCiAgICAgICAgICAgICAgICBlc2NhcGVNYXJrdXA6IGZ1bmN0aW9uIChtYXJrdXApIHsgcmV0dXJuIG1hcmt1cDsgfSwgLy8gbGV0IG91ciBjdXN0b20gZm9ybWF0dGVyIHdvcmsKICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVzdWx0OiBmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAubmFtZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVNlbGVjdGlvbjogZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLm5hbWUgPyBncm91cC5uYW1lIDogZ3JvdXAudGV4dDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsYW5ndWFnZTogewogICAgICAgICAgICAgICAgICAgIG5vUmVzdWx0czogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gItCf0L7QuNGB0Log0L3QtSDQtNCw0Lsg0YDQtdC30YPQu9GM0YLQsNGC0L7QsiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdpZHRoOiAiMTAwJSIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoJyN0aGVtZVNlbGVjdCcpLnNlbGVjdDIoewogICAgICAgICAgICAgICAgY29udGFpbmVyQ3NzQ2xhc3M6ICdzZWxlY3Qtd3JhcHBlcicsCiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogItCS0YvQsdC10YDQuNGC0LUg0YLQtdC80YMg0L7QsdGA0LDRidC10L3QuNGPIiwKICAgICAgICAgICAgICAgIGFqYXg6IHsKICAgICAgICAgICAgICAgICAgICB1cmw6ICIvYXBpL3NlcnZpY2UvIiwKICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgOiBwYXJhbXMudGVybSA/IHBhcmFtcy50ZXJtIDogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlIDogKHBhcmFtcy5wYWdlIHx8IDEpIC0gMQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1Jlc3VsdHM6IGZ1bmN0aW9uIChkYXRhLCBwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgOiBkYXRhLmNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vcmU6ICFkYXRhLmxhc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYWxsb3dDbGVhcjogdHJ1ZSwKICAgICAgICAgICAgICAgIGVzY2FwZU1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkgeyByZXR1cm4gbWFya3VwOyB9LCAvLyBsZXQgb3VyIGN1c3RvbSBmb3JtYXR0ZXIgd29yawogICAgICAgICAgICAgICAgdGVtcGxhdGVSZXN1bHQ6IGZ1bmN0aW9uIChncm91cCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5uYW1lOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRlbXBsYXRlU2VsZWN0aW9uOiBmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAubmFtZSA/IGdyb3VwLm5hbWUgOiBncm91cC50ZXh0OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdpZHRoOiAiMTAwJSIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vINCy0YvQsdC+0YAg0LrQu9Cw0YHRgdCwINCh0JzQpdCeCiAgICAgICAgICAgIHZhciBzbWhvRGF0YSA9IFsKICAgICAgICAgICAgICAgIHsgaWQ6J0InLCB0ZXh0OiAn0JrQu9Cw0YHRgSBCJywgZnVsbFRleHQ6ICfQmtC70LDRgdGBINC40L3RhtC40LTQtdC90YLQsCBCJ30sCiAgICAgICAgICAgICAgICB7IGlkOidDJywgdGV4dDogJ9Ca0LvQsNGB0YEgQycsIGZ1bGxUZXh0OiAn0JrQu9Cw0YHRgSDQuNC90YbQuNC00LXQvdGC0LAgQyd9LAogICAgICAgICAgICAgICAgeyBpZDonRCcsIHRleHQ6ICfQmtC70LDRgdGBIEQnLCBmdWxsVGV4dDogJ9Ca0LvQsNGB0YEg0LjQvdGG0LjQtNC10L3RgtCwIEQnfSwKICAgICAgICAgICAgICAgIHsgaWQ6J0EsQixDLEQnLCB0ZXh0OiAn0KLQvtC70YzQutC+INCh0JzQpdCeJywgZnVsbFRleHQ6ICfQotC+0LvRjNC60L4g0LjQvdGG0LjQtNC10L3RgtGLINCh0JzQpdCeJ30sCiAgICAgICAgICAgICAgICB7IGlkOicwJywgdGV4dDogJ9CR0LXQtyDQodCc0KXQnicsIGZ1bGxUZXh0OiAn0JHQtdC3INC40L3RhtC40LTQtdC90YLQvtCyINCh0JzQpdCeJ30KICAgICAgICAgICAgXTsKICAgICAgICAgICAgJCgnI3NtaG9TZWxlY3QnKS5zZWxlY3QyKHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lckNzc0NsYXNzOiAnc2VsZWN0LXdyYXBwZXInLAogICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICLQktGL0LHQtdGA0LjRgtC1INC60LvQsNGB0YEg0KHQnNCl0J4iLAogICAgICAgICAgICAgICAgZGF0YTogc21ob0RhdGEsCiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyOiB0cnVlLAogICAgICAgICAgICAgICAgZXNjYXBlTWFya3VwOiBmdW5jdGlvbiAobWFya3VwKSB7IHJldHVybiBtYXJrdXA7IH0sIC8vIGxldCBvdXIgY3VzdG9tIGZvcm1hdHRlciB3b3JrCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVJlc3VsdDogZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLmZ1bGxUZXh0ID8gZ3JvdXAuZnVsbFRleHQgOiBncm91cC50ZXh0OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRlbXBsYXRlU2VsZWN0aW9uOiBmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAudGV4dDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsCiAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiCiAgICAgICAgICAgIH0pLnZhbChudWxsKS50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICAgICAgKGZ1bmN0aW9uIGNhdGVnb3JpZXNTZWxlY3QyKCkgewogICAgICAgICAgICAgICAgdmFyIGNhdGx2bDEgPSAkKCcjY2F0bHZsMScpLAogICAgICAgICAgICAgICAgICAgIGNhdGx2bDIgPSAkKCcjY2F0bHZsMicpLAogICAgICAgICAgICAgICAgICAgIGNhdGx2bDMgPSAkKCcjY2F0bHZsMycpLAogICAgICAgICAgICAgICAgICAgIGNhdGx2bDQgPSAkKCcjY2F0bHZsNCcpLAogICAgICAgICAgICAgICAgICAgIHRoZW1lID0gJCgnI3RoZW1lJyksCiAgICAgICAgICAgICAgICAgICAgYWpheERhdGEgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBnZXRTZWxlY3QyT2JqZWN0ID0gZnVuY3Rpb24odXJsLCBjbGFzc2VzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyQ3NzQ2xhc3M6ICdzZWxlY3Qtd3JhcHBlciAnICsgKGNsYXNzZXMgPyBjbGFzc2VzIDogJycpLAogICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogItCS0YvQsdC10YDQuNGC0LUg0LrQsNGC0LXQs9C+0YDQuNGOIiwKICAgICAgICAgICAgICAgICAgICAgICAgYWpheDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcTogcGFyYW1zLnRlcm0gPyBwYXJhbXMudGVybSA6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAocGFyYW1zLnBhZ2UgfHwgMSkgLSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzUmVzdWx0czogZnVuY3Rpb24gKGRhdGEsIHBhcmFtcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY29udGVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhamF4RGF0YS5wdXNoKGVsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiBkYXRhLmNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vcmU6ICFkYXRhLmxhc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGVzY2FwZU1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmt1cDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgLy8gbGV0IG91ciBjdXN0b20gZm9ybWF0dGVyIHdvcmsKICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZXN1bHQ6IGZ1bmN0aW9uIChncm91cCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlU2VsZWN0aW9uOiBmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5uYW1lID8gZ3JvdXAubmFtZSA6IGdyb3VwLnRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1Jlc3VsdHM6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gItCf0L7QuNGB0Log0L3QtSDQtNCw0Lsg0YDQtdC30YPQu9GM0YLQsNGC0L7QsiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiMTAwJSIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBjYXRsdmwyLnBhcmVudCgpLmhpZGUoMCk7CiAgICAgICAgICAgICAgICBjYXRsdmwzLnBhcmVudCgpLmhpZGUoMCk7CiAgICAgICAgICAgICAgICBjYXRsdmw0LnBhcmVudCgpLmhpZGUoMCk7CiAgICAgICAgICAgICAgICB0aGVtZS5wYXJlbnQoKS5oaWRlKDApOwoKICAgICAgICAgICAgICAgIGNhdGx2bDEuc2VsZWN0MihnZXRTZWxlY3QyT2JqZWN0KCJhcGkvdXNlci9jYXRhbG9nL25vZGUvMC9jaGlsZHJlbi9wYWdlYWJsZSIpKTsKCiAgICAgICAgICAgICAgICBpbml0Q2F0KGNhdGx2bDEsIGNhdGx2bDIpOwogICAgICAgICAgICAgICAgaW5pdENhdChjYXRsdmwyLCBjYXRsdmwzKTsKICAgICAgICAgICAgICAgIGluaXRDYXQoY2F0bHZsMywgY2F0bHZsNCk7CiAgICAgICAgICAgICAgICBpbml0Q2F0KGNhdGx2bDQsIHRoZW1lKTsKCiAgICAgICAgICAgICAgICAvLyDQpNGD0L3QutGG0LjRjyDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCBuKzEg0YHRgtGD0L/QtdC90Lgg0LrQsNGC0LXQs9C+0YDQuNC30LDRhtC40LgKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRDYXQocGFyZW50Q2F0LCBjaGlsZENhdCl7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50Q2F0LmZpbmQoJ29wdGlvbjpub3QoW3ZhbHVlPSInICsgcGFyZW50Q2F0LnZhbCgpICsgJyJdKScpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHBhcmVudENhdC5vbigiY2hhbmdlIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZS52YWwobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkQ2F0LnZhbChudWxsKS50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRDYXQudmFsKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkQ2F0LnBhcmVudCgpLmhpZGUoMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZS5wYXJlbnQoKS5oaWRlKDApOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRDYXQucGFyZW50KCkuc2hvdygwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlcyA9IGNoZWNrU2VydmljZXMocGFyZW50Q2F0LnZhbCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkQ2F0LnBhcmVudCgpLmhpZGUoMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFRoZW1lKHNlcnZpY2VzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZS5wYXJlbnQoKS5oaWRlKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZENhdC5oYXNDbGFzcygic2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkQ2F0LnNlbGVjdDIoJ2Rlc3Ryb3knKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/QldGB0LvQuCDQvdC1INC+0YfQuNGJ0LDRgtGMLCDQvtGCINCy0L3Rg9GC0YDQuCDRgdC10LvQtdC60YLQsCDQvtGB0YLQsNGO0YLRgdGPINCy0YvQsdGA0LDQvdC90YvQtSDQsiDQv9GA0L7RiNC70YvQuSDRgNCw0Lcgb3B0aW9ucyDQuCDQv9GA0Lgg0LLRi9Cx0L7RgNC1INC40YUg0LIg0L/QvtCy0YLQvtGA0L3Ri9C5INGA0LDQtyDQuNC80Y8g0L3QtSDQvtGC0L7QsdGA0LDQttCw0LXRgtGB0Y8gwq9cKG9fbykvwq8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRDYXQuZW1wdHkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRDYXQuc2VsZWN0MihnZXRTZWxlY3QyT2JqZWN0KCJhcGkvdXNlci9jYXRhbG9nL25vZGUvIiArIHBhcmVudENhdC52YWwoKSArICIvY2hpbGRyZW4vcGFnZWFibGUiLCAnbWFyZ2lucycpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrU2VydmljZXMoaWQpewogICAgICAgICAgICAgICAgICAgIGlmIChhamF4RGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWpheERhdGEuZmluZChmdW5jdGlvbihlbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwuaWQgPT09ICtpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbC5zZXJ2aWNlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbml0VGhlbWUoc2VydmljZXMpewogICAgICAgICAgICAgICAgICAgIHRoZW1lLnBhcmVudCgpLnNob3coKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhlbWUuaGFzQ2xhc3MoInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUiKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZS5zZWxlY3QyKCdkZXN0cm95Jyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoZW1lLnNlbGVjdDIoewogICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJDc3NDbGFzczogJ3NlbGVjdC13cmFwcGVyIG1hcmdpbnMnLAogICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogItCS0YvQsdC10YDQuNGC0LUg0YLQtdC80YMiLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZXJ2aWNlcy5zZXJ2aWNlcywKICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dDbGVhcjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6ICdpbmZpbml0eScsCiAgICAgICAgICAgICAgICAgICAgICAgIGVzY2FwZU1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmt1cDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgLy8gbGV0IG91ciBjdXN0b20gZm9ybWF0dGVyIHdvcmsKICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZXN1bHQ6IGZ1bmN0aW9uIChncm91cCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlU2VsZWN0aW9uOiBmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBncm91cC5uYW1lID8gZ3JvdXAubmFtZSA6IGdyb3VwLnRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAiMTAwJSIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGVtZS52YWwobnVsbCkudHJpZ2dlcignY2hhbmdlJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKCk7CgogICAgICAgICAgICAvLyDQodC80LXQvdCwINGC0LjQv9CwINC30LDQv9C40YHQtdC5CiAgICAgICAgICAgIHZhciBwb3N0QnRuID0gJCgnLnR5cGUgYnV0dG9uJyk7CiAgICAgICAgICAgIHBvc3RCdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBzdGF0ZUlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLXR5cGUnKTsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSAiIyIgKyBzdGF0ZUlkICsgIj9zdGF0ZT1vcGVuZWQiOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGxvYWRDb250ZW50KCk7CiAgICAgICAgfSk7CiAgICB9Cn0KZnVuY3Rpb24gZ2V0TWVudVN0YXRlRnJvbUpzb24oKSB7CiAgICB2YXIgbWVudVN0YXRlU3RyaW5nID0gJC5jb29raWUobWVudVN0YXRlQ29va2llc05hbWUpOwogICAgaWYgKG1lbnVTdGF0ZVN0cmluZyAmJiBtZW51U3RhdGVTdHJpbmcgPT0gJ251bGwnKSB7CiAgICAgICAgJC5yZW1vdmVDb29raWUobWVudVN0YXRlQ29va2llc05hbWUpOwogICAgICAgIHJldHVybiB7fTsKICAgIH0KICAgIGlmIChtZW51U3RhdGVTdHJpbmcpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShtZW51U3RhdGVTdHJpbmcpOwogICAgICAgIH1jYXRjaCAoZSkgewogICAgICAgICAgICAkLnJlbW92ZUNvb2tpZShtZW51U3RhdGVDb29raWVzTmFtZSk7CiAgICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgICQucmVtb3ZlQ29va2llKG1lbnVTdGF0ZUNvb2tpZXNOYW1lKTsKICAgICAgICByZXR1cm4ge307CiAgICB9Cn0KLy/QpNGD0L3QutGG0LjRjywg0LLRi9C30YvQstCw0Y7RidCw0Y8g0LzQvtC00LDQuyDRgSDRgtC10LrRg9GJ0LXQuSDQstC10YDRgdC40LXQuSDRgdCx0L7RgNC60LgKZnVuY3Rpb24gdmVyc2lvbkNvbnRyb2woKSB7CiAgICAkLmFqYXgoewogICAgICAgIHVybDogJ2FwaS9hcHBJbmZvJywKICAgICAgICB0eXBlOiAnR0VUJwogICAgfSkuZG9uZShmdW5jdGlvbiAodmVyc2lvbkRhdGEpIHsKICAgICAgICB2YXIgJHZlcnNpb25Nb2RhbCA9ICQoJyN2ZXJzaW9uX21vZGFsJyk7CiAgICAgICAgJHZlcnNpb25Nb2RhbC5jaGlsZHJlbignZGl2JykuZW1wdHkoKTsKICAgICAgICAkdmVyc2lvbk1vZGFsLmNoaWxkcmVuKCdkaXYnKS5hcHBlbmQoIjxoNT4iICsgdmVyc2lvbkRhdGEubmFtZSArICI8L2g1Pjxocj48cD4iICsgdmVyc2lvbkRhdGEudmVyc2lvbiArICI8L3A+PHA+IiArIHZlcnNpb25EYXRhLmJ1aWxkVGltZXN0YW1wICsgIjwvcD4iKTsKICAgICAgICAkdmVyc2lvbk1vZGFsLm1vZGFsKCdvcGVuJyk7CiAgICB9KTsKfQ==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="596708718" offset="0" length="1460" />
        <PacketInfo time="596708718" offset="1460" length="16384" />
        <PacketInfo time="596708718" offset="17844" length="16384" />
        <PacketInfo time="596708718" offset="34228" length="736" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>